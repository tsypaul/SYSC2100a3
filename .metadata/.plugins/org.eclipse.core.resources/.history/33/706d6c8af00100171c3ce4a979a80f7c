package StackReferenceBased;

import java.util.Scanner;
import java.util.StringTokenizer;

public class Infix2PostfixConverter {
	
	public static boolean isOperator(char c){
        return (c == '+' || c == '-' || c == '*' || c == '/' || c == '(' || c == ')');
    }

    public static boolean isSpace(char c){
    	return (c == ' ');
    }
    
    public boolean getPrecedence(char op1, char op2){
    	if(op1 == '+' || op1 == '-'){
    		return !(op2 == '+' || op2 == '-');
    	}else if(op1 == '*' || op1 == '/'){
    		return op2 == '(';
    	}else if(op1 == '('){
    		return true;
    	}
    	return false;
    }
    
    public String infixToPostfix(String infix){
    	StackReferenceBased s = new StackReferenceBased();
    	StringTokenizer split = new StringTokenizer(infix, "+-*/()", true);
    	StringBuffer postfix = new StringBuffer(infix.length());
    	char c;
    	while(split.hasMoreTokens()){
    		String x = split.nextToken();
    		c = x.charAt(0);
    		if(x.length() == 1 && isOperator(c)){
    			while(!s.isEmpty() && !getPrecedence(s.peek().toString().charAt(0),c)){
    				postfix.append(s.pop().toString());
    			}
    			if(c == ')'){
    				String a = s.pop().toString();
    				while(a.charAt(0) != '('){
    					postfix.append(a);
    					a = s.pop().toString();
    				}
    			}else{
    				s.push(x);
    			}
    		}
    	}
    }
	
	public static void main(String[] arg){
		System.out.println("Please enter a infix: ");
		Scanner S = new Scanner(System.in);
		String infix = S.nextLine();
		S.close();
//		Object[] in = new Object [infix.length()];
//		for (int i = 0; i < infix.length(); i++){
//			in[i] = infix.charAt(i);
//		}
		System.out.println("infix: " + infix);
		System.out.println("postfix: " + InToPost(infix));
		
	}
}
